<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      $(document).ready(function () {
        const searchId = new URLSearchParams(window.location.search);
        const movieId = searchId.get("movieId");

        $.ajax({
          url: "fetch_movies.php",
          method: "GET",
          dataType: "json",
          success: function (data) {
            const filteredMovie = data.find(
              (movie) => movie.id === parseInt(movieId, 10)
            );
            if (data.results && data.results.length > 0) {
              let output = `<h3>${data.results.title}</h3>`;
              data.results.forEach(function (movie) {
                output += `<img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title} 포스터">
                            <div class="movie-title">
                              ${movie.title} (${movie.release_date})
                            </div>`;
              });
              $("#result").html(output);
            } else {
              $("#result").html("<p>영화 데이터를 찾을 수 없습니다.</p>");
            }
          },
          error: function () {
            $("#result").html("<p>영화를 가져오는 데 실패했습니다.</p>");
          },
        });
      });
    </script>
  </head>
  <body>
    <h1>영화 상세 페이지</h1>
  </body>
</html>
